# copper-jni
## Description
Java Native Interface for the Copper project.

## Files
The .h file is the header file of native methods (or called them functions in C) generated by javah command.
The .c file is the implements of the native methods in NativeInterfaceImpl.java.
The libcopper.so is the dynamic library referenced by *Copper* Java class library, and the .so file is generated by the .c and .h file.

## How to use
If you just want to use *Copper* library in Java environments, you can just simply copy the file libcopper.so to the system library path.<br />
```
sudo cp libcopper.so /usr/lib
```

On 64-bit Pi, you can also compile the native functions with:<br />
```
-- Preferred:
   ./compile.sh

-- Tested (what the script above does)
g++ -c -fPIC -I${JAVA_HOME}/include -I${JAVA_HOME}/include/linux\
        com_maehem_copper_pi_NativeControllerImpl.cpp -o libcopper.o   
g++ -shared -fPIC -o libcopper.so libcopper.o -lc -lpigpio

-- Untested
gcc -shared -I ${JAVA_HOME}/include -I ${JAVA_HOME}/include/linux  \
NativeControllerImpl.c -lpigpio -o libcopper.so -Wall
```

And then cp libcopper.so to the system library path.
*   Note: if you don't want to copy the library to the /usr/lib, you can specify the library path before running your Java program, like:
```
    java -Djava.library.path=. YouProgram
```
    (this specifies the . directory as the native library path.)
